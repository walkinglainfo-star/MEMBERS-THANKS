<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Members Ticker â€“ Scrolling One Pass + Fade</title>
  <style>
    :root{
      --speed: 80s;            /* seconds for one full pass */
      --bar-height: 100px;     /* black strip height */
      --font-size: 30px;       /* text size */
      --gap: 3rem;             /* spacing between items */
      --distance: 0px;         /* set by JS after measuring segA width */
    }

    html, body { margin: 0; padding: 0; height: 100%; background: rgba(0,0,0,0); overflow: hidden; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }

    /* Strip container */
    .bar { position: fixed; left: 0; right: 0; bottom: 0; height: var(--bar-height); background: #000; color: #fff; display: flex; align-items: center; padding: 0 16px; box-sizing: border-box; overflow: hidden; }
    .bar[data-top="1"]{ bottom: auto; top: 0; }
    .bar.fadeout{ opacity: 0; transition: opacity 2.2s ease; }

    /* Fireworks stays BEHIND text */
    #fx{ position:absolute; inset:0; width:100%; height:100%; z-index:0; pointer-events:none; background:transparent; }

    .viewport { position: relative; width: 100%; height: 100%; overflow: hidden; z-index: 1; pointer-events: none; }

    .track { display: inline-flex; white-space: nowrap; will-change: transform; }
    body.ready .track { animation: scroll var(--speed) linear 1 both; }

    .seg { display: inline-flex; }
    .item { font-size: var(--font-size); line-height: 1; padding: 0 var(--gap); white-space: nowrap; position: relative; top: 2px; }
    .header{ font-weight: 700; }
    .dot { opacity: 0.6; padding: 0 1rem; animation: blink 1.1s linear infinite; position: relative; top: 2px; }
    @keyframes blink { 0%{opacity:0.25} 50%{opacity:1} 100%{opacity:0.25} }

    @keyframes scroll{ from { transform: translateX(0); } to { transform: translateX(calc(-1 * var(--distance))); } }
    * { user-select: none; -webkit-user-select: none; }

    /* Intro/Outro messages + heart animation */
    .msg { font-size: calc(var(--font-size) + 2px); font-weight: 700; letter-spacing: 0.3px; }
    .heart { display: inline-block; transform-origin: center; animation: beat 1.2s ease-in-out infinite; margin: 0 0.25rem; }
    .heart:nth-of-type(2) { animation-delay: .2s; }
    .heart:nth-of-type(3) { animation-delay: .4s; }
    @keyframes beat { 0%,100% { transform: scale(1); } 50% { transform: scale(1.25); } }
  </style>
</head>
<body>
  <div class="bar" id="bar">
    <canvas id="fx"></canvas>
    <div class="viewport">
      <div class="track" id="track">
        <div class="seg" id="segA">
          <!-- BEGIN NAMES: AUTO-GENERATED FROM CSV -->
          <span class="item msg">ğŸŒŸ THANK YOU TO OUR MEMBERS ğŸŒŸ</span>
          <span class="dot">â€¢</span><span class="item msg">From silent walkers to chat champs, you make this more than a stream; you make it a scene. <span class="heart">â¤ï¸</span><span class="heart">â¤ï¸</span><span class="heart">â¤ï¸</span></span>
          <span class="dot">â€¢</span>
          <span class="item header">â˜… Walk Of Famers</span>
          <span class="dot">â€¢</span><span class="item">James E. Woods ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">Mel Alvez ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">WiLLuMPJuH</span>
          <span class="item header">ğŸ§­ Urban Explorers</span>
          <span class="dot">â€¢</span><span class="item">nadijka ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">Gene Gray</span>
          <span class="dot">â€¢</span><span class="item">Ozge</span>
          <span class="item header">ğŸ„ Sidewalk Surfers</span>
          <span class="dot">â€¢</span><span class="item">Cecilia Wilson ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">bdukstein ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">Jay Walker ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">Joey B ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">marymcq2 ğŸ’</span>
          <span class="dot">â€¢</span><span class="item">Steve D ğŸ’</span>
          <!-- The rest of Sidewalk Surfers auto-generated from CSV (total 109) -->
          <!-- END NAMES -->
        </div>
        <div class="seg" id="segB" aria-hidden="true"></div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const params = new URLSearchParams(location.search);
      const speed = params.get('speed');
      const size = params.get('size');
      const height = params.get('height');
      const top = params.get('top');

      if (speed) document.documentElement.style.setProperty('--speed', Number(speed) + 's');
      if (size) document.documentElement.style.setProperty('--font-size', Number(size) + 'px');
      if (height) document.documentElement.style.setProperty('--bar-height', Number(height) + 'px');
      if (top) document.getElementById('bar').setAttribute('data-top','1');

      const segA = document.getElementById('segA');
      const segB = document.getElementById('segB');
      const track = document.getElementById('track');
      const bar = document.getElementById('bar');

      function measureAndStart(){
        segB.innerHTML = segA.innerHTML; // duplicate for seamless look
        const w = segA.getBoundingClientRect().width; // measure content width
        document.documentElement.style.setProperty('--distance', (w) + 'px');
        document.body.classList.add('ready');
      }

      // Start when fonts are ready
      if (document.fonts && document.fonts.ready){
        document.fonts.ready.then(()=>{ requestAnimationFrame(measureAndStart); });
      } else {
        window.addEventListener('load', ()=>{ requestAnimationFrame(measureAndStart); });
      }

      // When the one-pass scroll finishes, fade the strip
      track.addEventListener('animationend', ()=>{
        bar.classList.add('fadeout');
      });

      // Recompute on resize/rotate
      if ('ResizeObserver' in window){
        const ro = new ResizeObserver(()=>{ document.body.classList.remove('ready'); requestAnimationFrame(measureAndStart); });
        ro.observe(document.querySelector('.viewport'));
      } else {
        window.addEventListener('resize', ()=>{ document.body.classList.remove('ready'); requestAnimationFrame(measureAndStart); });
      }
    })();

    // Neon fireworks kept behind text
    (function(){
      const canvas = document.getElementById('fx');
      const bar = document.getElementById('bar');
      const ctx = canvas.getContext('2d');
      let W=0,H=0; const bursts=[];

      function resize(){
        const r = bar.getBoundingClientRect();
        W = canvas.width = r.width * devicePixelRatio;
        H = canvas.height = r.height * devicePixelRatio;
        canvas.style.width = r.width + 'px';
        canvas.style.height = r.height + 'px';
      }
      function neon(){
        if (bursts.length < 6 && Math.random() < 0.08){
          const x = Math.random()*W, y = (0.2+Math.random()*0.6)*H;
          const hue = Math.floor(Math.random()*360);
          const parts=[];
          for (let i=0;i<30;i++){ const a=(i/30)*Math.PI*2, s=1+Math.random()*2; parts.push({x,y,vx:Math.cos(a)*s,vy:Math.sin(a)*s,life:0,max:35+Math.random()*10,hue}); }
          bursts.push(parts);
        }
        ctx.clearRect(0,0,W,H); ctx.globalCompositeOperation='lighter';
        for (let b=bursts.length-1;b>=0;b--){
          const parts=bursts[b]; let alive=false;
          for (const p of parts){ p.life++; p.x+=p.vx*2; p.y+=p.vy*2; p.vy+=0.02*devicePixelRatio; const alpha=1-p.life/p.max; if (alpha>0){ alive=true; const glow=6; for (let g=glow; g>0; g--){ ctx.beginPath(); ctx.arc(p.x,p.y,g,0,Math.PI*2); ctx.strokeStyle=`hsla(${p.hue},100%,${60-g*6}%,${alpha*0.25})`; ctx.lineWidth=2; ctx.stroke(); } } }
          if (!alive) bursts.splice(b,1);
        }
        ctx.globalCompositeOperation='source-over'; requestAnimationFrame(neon);
      }
      window.addEventListener('resize', resize); resize(); neon();
    })();
  </script>
</body>
</html>
